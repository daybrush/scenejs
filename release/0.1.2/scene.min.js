!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Scene",[],t):"object"==typeof exports?exports.Scene=t():e.Scene=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=10)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"")+t;return e?function(){return this[e][r]}:function(){return this[r]}},o=function(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"")+t;return e?function(t){return this[e][r]=t,this}:function(e){return this[r]=e,this}},a=(t.isUndefined=function(e){return void 0===e},t.isObject=function(e){return"object"===(void 0===e?"undefined":n(e))},t.isArray=function(e){return Array.isArray(e)},t.isString=function(e){return"string"==typeof e},t.has=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.splitUnit=function(e){var t=""+e;try{var r=t.match(/([0-9]|\.|-|e-|e\+)+/g,"")[0];return{unit:t.replace(r,"")||"",value:r=parseFloat(r)}}catch(e){return{unit:t}}},t.camelize=function(e){return e.replace(/[\s-_]([a-z])/g,function(e,t){return t.toUpperCase()})},t.defineProperty=function(e,t,r){Object.defineProperty(e,t,r)});t.defineGetter=function(e){var t=e.target,r=e.name,n=e.parent,o=e.prefix;a(t,r,{get:i(n,r,o)})},t.defineSetter=function(e){var t=e.target,r=e.name,n=e.parent,i=e.prefix;a(t,r,{set:o(n,r,i)})},t.defineGetterSetter=function(e){var t=e.target,r=e.name,n=e.parent,u=e.prefix;a(t,r,{get:i(n,r,u),set:o(n,r,u)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EASE_IN_OUT=t.EASE_OUT=t.EASE_IN=t.EASE=t.PLAY_DIRECTION=t.FILL_MODE=t.ANIMATION_PLAY_STATE=t.SCENE_ROLES=t.PROPERTY=t.PREFIX=void 0;var n,i=r(3),o=(n=i)&&n.__esModule?n:{default:n};t.PREFIX="__SCENEJS_";var a,u,s,f=t.PROPERTY="property";t.SCENE_ROLES=(s=!0,(u=f)in(a={})?Object.defineProperty(a,u,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[u]=s,a),t.ANIMATION_PLAY_STATE=["idle","pending","paused","running","finished"],t.FILL_MODE=["none","forwards","backwards","both","auto"],t.PLAY_DIRECTION=["normal","reverse","alternate","alternate-reverse"],t.EASE=(0,o.default)(.25,.1,.25,1),t.EASE_IN=(0,o.default)(.42,0,1,1),t.EASE_OUT=(0,o.default)(0,0,.58,1),t.EASE_IN_OUT=(0,o.default)(.42,0,.58,1)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0);var o=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.prefix="",this.suffix="",this.model="",this.type="",this.separator=",",this.init(t,r)}return n(e,[{key:"init",value:function(e,t){var r=void 0;if((0,i.isObject)(t))for(r in t)this[r]=t[r];else this.separator=t;(0,i.isString)(e)?this.value=e.split(this.separator):(0,i.isObject)(e)?this.value=e:this.value=[e]}},{key:"get",value:function(e){return this.value[e]}},{key:"set",value:function(e,t){return this.value[e]=t,this}},{key:"clone",value:function(){var t=[],r=this.value,n="",i=void 0;for(i in r)n=r[i],t.push(n instanceof e?n.clone():n);return new e(t,{separator:this.separator,prefix:this.prefix,suffix:this.suffix,model:this.model,type:this.type})}},{key:"toValue",value:function(){return this.prefix+this.join()+this.suffix}},{key:"join",value:function(){var t=[],r=this.value,n=this.separator,i="",o=void 0;for(o in r)i=r[o],t.push(i instanceof e?i.toValue():i);return t.join(n)}},{key:"each",value:function(e){var t=this.value;for(var r in t)e(t[r],r,t)}},{key:"multiply",value:function(t){var r=this.value;for(var n in r)r[n]instanceof e?r[n].multiply(t):r[n]*=t}},{key:"length",get:function(){var e=this.value;if((0,i.has)(e,"length"))return e.length;var t=0,r=void 0;for(r in e)(0,i.has)(e,r)&&++t;return t}}]),e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,n){function i(e,t,r){var n=1-r;return r*r*r+3*r*r*n*t+3*r*n*n*e}var o=function(o){var a=o;return a>=1?a=1:a<=0&&(a=0),a=function(t){for(var n=t,o=1;Math.abs(o)>.001;){if(o=i(e,r,n)-t,Math.abs(o)<.001)return n;n-=o/2}return n}(a),i(t,n,a)};return o.easingName="cubic-bezier("+e+", "+t+", "+r+", "+n+")",o}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=u(r(13)),o=u(r(3)),a=r(0);function u(e){return e&&e.__esModule?e:{default:e}}var s=0,f=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){var t=Date.now(),r=Math.max(0,16-(t-s)),n=window.setTimeout(function(){e(t+r)},1e3/60);return s=t+r,n},l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._timer=0,r.options={},r.options.easingName="linear",r.iterationCount=1,r.delay=0,r.fillMode="forwards",r.direction="none",r.playState="paused",r.playSpeed=1,r._currentTime=0,r._currentIterationTime=-1,r._prevTime=0,r.setOptions(e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),n(t,[{key:"setOptions",value:function(e){if(!e)return this;var t=void 0;for(t in e)"easing"!==t?this.options[t]=e[t]:this[t]=e[t];return this}},{key:"play",value:function(){var e=this;return this.ended&&(this.currentTime=0),this.playState="running",f(function(t){e._prevTime=t,e.tick(t)}),this.trigger("play"),this}},{key:"pause",value:function(){return this.playState="paused",this.trigger("paused"),this}},{key:"stop",value:function(){return this.playState="paused",this.trigger("paused"),this.trigger("ended"),this}},{key:"reset",value:function(){return this.currentTime=0,this.stop(),this}},{key:"setCurrentTime",value:function(e){var t=this.totalDuration,r=e;r<0?r=0:r>t&&(r=t),this._currentTime=r,this.calculateIterationTime(),this.trigger("timeupdate",{currentTime:r})}},{key:"calculateIterationTime",value:function(){var e=this._currentTime,t=this.duration,r=this.iterationCount,n=this.fillMode,i=this.direction,o=parseInt(1e4*Math.max(e-this.delay,0),10)/1e4,a=0===t?0:o/t,u=a%2>=1,s=o%t,f=!1;switch(i){case"reverse":s=t-s;break;case"alternate":u&&(s=t-s),f=!0;break;case"alternate-reverse":u||(s=t-s),f=!0}switch(n){case"both":case"forwards":if(f||a!==r||r%1!=0)break;s=t-s;break;default:if(a!==r||r%1!=0)break;s=0}this.setIterationTime(s)}},{key:"caculateEasing",value:function(e){if(!this.options.easing)return e;var t=this.duration;return(0,this.options.easing)(0===t?0:e/t)*e}},{key:"setIterationTime",value:function(e){var t=e;return this._currentIterationTime=t,this.trigger("iterationtimeupdate",{iterationTime:t}),this}},{key:"tick",value:function(e){var t=this,r=this._prevTime,n=this.currentTime+Math.min(1e3,e-r)/1e3;this._prevTime=e,this.setCurrentTime(n),this.ended&&this.stop(),"paused"!==this.playState&&f(function(e){t.tick(e)})}},{key:"easing",set:function(e){Array.isArray(e)?(this.options.easingName="cubic-bezier("+e.join(" ,")+")",this.options.easing=o.default.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e))):(this.options.easing=e,this.options.easingName=e.easingName||"linear")},get:function(){return this.options.easing}},{key:"currentTime",set:function(e){this.setCurrentTime(e)}},{key:"totalDuration",get:function(){return"infinite"===this.iterationCount?1/0:this.delay+this.activeDuration}},{key:"activeDuration",get:function(){return"infinite"===this.iterationCount?1/0:this.duration*this.iterationCount}},{key:"ended",get:function(){return 0===this.currentTime&&"paused"===this.playState||!(this.currentTime<this.totalDuration)}},{key:"paused",get:function(){return"paused"===this.playState}},{key:"next",set:function(e){this.on("ended",function(){e.play()})}}]),t}();(0,a.defineGetter)({target:l.prototype,name:"currentIterationTime",prefix:"_"}),(0,a.defineGetter)({target:l.prototype,name:"currentTime",prefix:"_"}),(0,a.defineGetter)({target:l.prototype,name:"easing",parent:"options"}),(0,a.defineGetterSetter)({target:l.prototype,name:"playSpeed",parent:"options"}),(0,a.defineGetterSetter)({target:l.prototype,name:"playState",parent:"options"}),(0,a.defineGetterSetter)({target:l.prototype,name:"iterationCount",parent:"options"}),(0,a.defineGetterSetter)({target:l.prototype,name:"duration",parent:"options"}),(0,a.defineGetterSetter)({target:l.prototype,name:"fillMode",parent:"options"}),(0,a.defineGetterSetter)({target:l.prototype,name:"direction",parent:"options"}),(0,a.defineGetterSetter)({target:l.prototype,name:"delay",parent:"options"}),t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=f(r(4)),o=f(r(6)),a=r(0),u=f(r(15)),s=r(17);function f(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));return n.timeline=new u.default,n.load(e,r),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),n(t,[{key:"setId",value:function(e){this.options.id=e}},{key:"set",value:function(e,t,r,n){if((0,a.isObject)(e))return this.load(e),this;var i=this.getFrame(e)||this.newFrame(e);return i.set(t,r,n),this.updateFrame(i),this}},{key:"get",value:function(e,t,r){var n=this.getFrame(e);return n&&n.get(t,r)}},{key:"remove",value:function(e,t,r){var n=this.getFrame(e);return n&&n.remove(t,r),this}},{key:"setIterationTime",value:function(e){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setIterationTime",this).call(this,e);var r=this.currentIterationTime;return this.getNowFrame(r)?(this.trigger("animate",{time:r,frame:this.getNowFrame(r),currentTime:this.currentTime}),this):this}},{key:"update",value:function(){return this.timeline.update(),this}},{key:"updateFrame",value:function(e){return this.timeline.updateFrame(e),this}},{key:"newFrame",value:function(e){var t=this.getFrame(e);return t||(t=new o.default,(0,a.isUndefined)(e)||this.setFrame(e,t),t)}},{key:"setFrame",value:function(e,t){return this.timeline.add(e,t),this}},{key:"getFrame",value:function(e){return(0,a.isString)(e)&&~e.search(/([0-9]|\.|-|e-|e\+)+%/g)?this.timeline.get(parseFloat(e)/100*this.duration):this.timeline.get(e)}},{key:"hasFrame",value:function(e){return this.timeline.has(e)}},{key:"removeFrame",value:function(e){var t=this.timeline;return t.remove(e),t.update(),delete this.frames[e],this}},{key:"copyFrame",value:function(e,t){var r=void 0;if((0,a.isObject)(e)){for(r in e)this.copyFrame(r,e[r]);return this}var n=this.getFrame(e);if(!n)return this;var i=n.clone();return this.setFrame(t,i),this}},{key:"mergeFrame",value:function(e,t){var r=void 0;if((0,a.isObject)(e)){for(r in e)this.mergeFrame(r,e[r]);return this}var n=this.getFrame(e);return n?(this.newFrame(t).merge(n),this):this}},{key:"getNowValue",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.timeline.length,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=this.timeline,f=u.times,l=f.length,c=void 0,p=void 0,h=void 0,v=f[n],d=f[i];if(!(r<v)){for(h=n;h>=0&&(v=f[h],!(c=u.get(v)).has(e,t));--h);for(h=i;h<l&&(d=f[h],!(p=u.get(d)).has(e,t));++h);var y=c.get(e,t);if(!(0,a.isUndefined)(y)){if(!p)return y;var m=p.get(e,t);if((0,a.isUndefined)(m)||y===m)return y;v<0&&(v=0);var b=f[n],g=f[i];if(!o||!this.options.easing||b===g)return(0,s.dot)(y,m,r-v,d-r);var _=(0,s.dot)(y,m,b-v,d-b),O=(0,s.dot)(y,m,g-v,d-g),S=this.options.easing((r-b)/(g-b));return(0,s.dot)(_,O,S,1-S)}}}},{key:"getNearIndex",value:function(e){var t=this.timeline,r=t.times,n=t.last,i=t.length;if(0!==i){var o=parseInt(n>0?e*i/n:0,10),a=i-1,u=0;if(o<0?o=0:o>a&&(o=a),e<r[a])for(;u<a;){if((u===o||a===o)&&u+1===a){e<r[u]&&(a=u);break}if(r[o]>e)a=o;else{if(!(r[o]<e)){u=a=o;break}u=o}o=parseInt((u+a)/2,10)}else u=o=a;return{left:u,right:a}}}},{key:"getNowFrame",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.getNearIndex(e);if(!r)return r;var n=r.left,i=r.right,o=this.newFrame(),u=this.timeline.names;for(var s in u){var f=u[s];for(var l in f){var c=this.getNowValue(s,l,e,n,i,t);(0,a.isUndefined)(c)||o.set(s,l,c)}}return o}},{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.options;for(var r in e)if("options"!==r){var n=e[r],i=void 0;i="from"===r?0:"to"===r?100:parseFloat(r),"number"!=typeof n?this.set(i,e[i]):this.mergeFrame(n,i)}return t&&this.setOptions(t),this}},{key:"duration",get:function(){return this.timeline.last},set:function(e){var t=e/this.duration,r=this.timeline,n=r.times,i=r.items,o={};r.times=n.map(function(e){var r=e*t;return o[r]=i[e],r}),r.items=o}}]),t}();t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(1),a=r(0),u=r(7),s=r(2),f=(n=s)&&n.__esModule?n:{default:n};function l(e){return c({},e,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}function c(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var n in t){var i=t[n];(0,a.isObject)(i)?i instanceof f.default?e[n]=r?i.toValue():i.clone():(0,a.isArray)(i)?e[n]=i.slice():!(0,a.isObject)(e[n])||e[n]instanceof f.default?e[n]=l(i,r):c(e[n],i,r):e[n]=t[n]}return e}var p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=void 0;this.properties={};for(r in o.SCENE_ROLES)this.properties[r]={};this.load(t)}return i(e,[{key:"load",value:function(e){if(e&&!(0,a.isObject)(e))return this;var t=void 0,r=void 0;for(r in e)t=e[r],(0,a.has)(o.SCENE_ROLES,r)?this.set(r,t):!(0,a.isObject)(t)||(0,a.isArray)(t)||t instanceof f.default?this._set(o.PROPERTY,r,t):this.set(r,t);return this}},{key:"get",value:function(e,t){return t?this.properties[e]&&this.properties[e][t]:e in o.SCENE_ROLES?this.properties[e]:this.properties[o.PROPERTY][e]}},{key:"remove",value:function(e,t){return t?delete this.properties[e][t]:e in o.SCENE_ROLES?delete this.properties[e]:delete this.properties[o.PROPERTY][e],this}},{key:"_set",value:function(e,t,r){var n=r;(0,a.isString)(n)&&(n=(0,u.toPropertyObject)(n)),e in this.properties||(this.properties[e]={}),this.properties[e][t]=n}},{key:"set",value:function(e,t,r){var n=this,i=void 0,o=r;if((0,a.isObject)(e))return this.load(e),this;if((0,a.isObject)(t)){for(i in t)this._set(e,i,t[i]);return this}if((0,a.isUndefined)(r)){if((0,a.isString)(t))if((o=(0,u.splitSpace)(t).map(function(e){return(0,u.toPropertyObject)(e)})).every(function(e){return e.model&&"color"!==e.type}))return o.forEach(function(t){var r=t.model;t.model="",t.prefix="",t.suffix="",n._set(e,r,t)}),this;return this._set("property",e,t),this}return this._set(e,t,o),this}},{key:"has",value:function(e,t){return(0,a.has)(this.properties[e],t)}},{key:"clone",value:function(){var t=new e;return t.merge(this),t}},{key:"merge",value:function(e){var t=this.properties,r=e.properties;return r?(c(t,r),this):this}},{key:"toObject",value:function(){return l(this.properties,!0)}}]),e}();t.default=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringToColorObject=t.toPropertyObject=t.toBracketObject=t.toColorObject=t.arrayToColorObject=t.splitComma=t.splitSpace=void 0;var n,i=r(2),o=(n=i)&&n.__esModule?n:{default:n},a=r(14),u=r(0);var s=void 0,f=void 0,l=t.splitSpace=function(e){for(var t=e.split(/("[^"]*"|'[^']*'|[^\s()]*(?:\((?:[^()]*|\([^()]*\))*\))[^\s()]*)|\s+/g),r=t.length,n=[],i=void 0,o=void 0,a=0,s=0;s<r;++s)i=t[s],(0,u.isUndefined)(i)?n[a]&&++a:i&&(o=n[a],n[a]=o?o+i:i);return n},c=t.splitComma=function(e){for(var t=e.split(/("[^"]*"|'[^']*'|[^,\s()]*(?:\((?:[^()]*|\([^()]*\))*\))[^,\s()]*)|\s*,\s*/g),r=t.length,n=[],i=void 0,o=void 0,a=0,s=0;s<r;++s)i=t[s],(0,u.isUndefined)(i)?n[a]&&++a:i&&(o=n[a],n[a]=o?o+i:i);return n},p=t.arrayToColorObject=function(e){var t="rgba";return e instanceof o.default?(e.type="color",e.model=t,e.prefix=t+"(",e):(3===e.length&&(e[3]=1),new o.default(e,{model:t,separator:",",type:"color",prefix:t+"(",suffix:")"}))},h=t.toColorObject=function(e){var t=void 0;if(e instanceof o.default)t=e;else{if(!(0,u.isObject)(e))return(0,u.isString)(e)?f(e):e;t=p(e)}var r=t.value,n=r.length;4===n?r[3]=parseFloat(r[3]):3===n&&(r[3]=1),t.type="color";var i=t.model.toLowerCase(),s=void 0;switch("rgb"===i&&p(t),i){case"rgb":case"rgba":for(s=0;s<3;++s)r[s]=parseInt(r[s],10);break;case"hsl":case"hsla":for(s=1;s<3;++s)-1!==r[s].indexOf("%")&&(r[s]=parseFloat(r[s])/100);return r=(0,a.hslToRGB)(r),p(r)}return t},v=t.toBracketObject=function(e){var t=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(e);if(!t||t.length<4)return e;var r=t[1]||"",n=r+"(",i=t[2],a=")"+t[3],u=c(i),f=void 0,l=",";return 1===u.length&&((f=s(i)).prefix||f.suffix||(l=f.separator,f=f.value)),f||(f=u.map(function(e){return s(e)})),new o.default(f,{separator:l,model:r,prefix:n,suffix:a})};t.stringToColorObject=f=function(e){var t=0,r=0;if("#"===e.charAt(0))return t=4===e.length?(0,a.hexToRGB)((0,a.hex3to6)(e)):(e.length,(0,a.hexToRGB)(e)),p(t);if(-1===e.indexOf("("))throw new Error("Invalid Format : Not a Color - "+e);return r=v(e),h(r)},t.toPropertyObject=s=function(e){if(!(0,u.isString)(e))return e;var t=c(e),r=void 0;if(t.length>1)return(r=new o.default(t.map(function(e){return s(e)}),",")).type="array",r;if((t=l(e)).length>1)return(r=new o.default(t.map(function(e){return s(e)})," ")).type="array",r;if((r=e.charAt(0))&&('"'===r||"'"===r))return e;if(-1!==e.indexOf("(")){if(r=v(e),!(0,u.isObject)(r))return r;var n=r.model.toLowerCase();if(-1!==a.COLOR_MODELS.indexOf(n))return h(r);for(var i=r.length,f=0;f<i;++f)r.set(f,s(r.get(f)));return r}return 0===e.indexOf("#")?h(e):e},t.toPropertyObject=s,t.stringToColorObject=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},o=l(r(5)),a=r(1),u=r(0),s=r(9),f=l(r(18));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){e.time;var t=e.frame,r=this.options.element;if(r){var n=t.cssText;if(this.options.cssText!==n){this.options.cssText=n;for(var i=r.length,o=0;o<i;++o)r[o].style.cssText=n}}}function p(){for(;;){var e=""+parseInt(1e5*Math.random(),10);if(!document.querySelector('[data-scene-id="'+e+'"]'))return e}}var h=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.on("animate",c),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),n(t,[{key:"newFrame",value:function(e){var t=this.getFrame(e);return t||(t=new f.default,(0,u.isUndefined)(e)||this.setFrame(e,t),t)}},{key:"setId",value:function(e){var r=this.element;i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setId",this).call(this,e);var n=(0,s.toId)(this.options.id);if(this.options.selector||(this.options.selector='[data-scene-id="'+n+'"]'),!r)return this;for(var o=r.length,a=0;a<o;++a)r[a].setAttribute("data-scene-id",n);return this}},{key:"setSelector",value:function(e){return this.options.selector=e||'[data-scene-id="'+this.options.id+'"]',this.setElement(document.querySelectorAll(e)),this}},{key:"setElement",value:function(e){if(!e)return this;var t=this.id;return this.options.element=e instanceof Element?[e]:e,this.setId(t&&"null"!==t?t:p()),this}},{key:"copyCSSStyle",value:function(e){var t=this.element;if(t instanceof NodeList&&(t=t[0]),!t)return this;var r=t.style.cssText.split(";"),n=r.length,i={},o=void 0,a=void 0;for(o=0;o<n;++o)!(a=/([^:]*):([\S\s]*)/g.exec(r[o]))||a.length<3||(i[a[1]]=a[2]);return this.set(e,i),this}},{key:"copyCSSProperty",value:function(e,t){var r=this.element&&this.element[0];if(!r)return this;var n=r.style,i={};if((0,u.isObject)(t))for(var o=void 0,a=0,s=t.length;a<s;++a)o=t[a],i[t]=n&&n[o]||window.getComputedStyle(r)[o];else i[t]=n&&n[t]||window.getComputedStyle(r)[t];return this.set(e,i),this}},{key:"setOptions",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setOptions",this).call(this,e);var r=e&&e.selector,n=e&&e.element;return r||n?(n&&this.setElement(n),!0===r?this.setSelector(this.options.id):this.setSelector(r),this):this}},{key:"toKeyframes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.duration,r=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],this.options.id||this.setId(p()).options.id);if(!r)return"";var n=this.duration,i=n/t,o=this.timeline.times.map(function(t){var r=e.getNowFrame(t,!1);return t/n*i*100+"%{"+r.toCSS()+"}"});return i<1&&o.push("100%{"+this.getNowFrame(n,!1).toCSS()+"}"),"@keyframes "+a.PREFIX+"KEYFRAMES_"+(0,s.toId)(r)+"{\n\t\t\t"+o.join("\n")+"\n\t\t}"}},{key:"toCSS",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.duration,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.options.id||this.setId(p()).options.id;if(!r)return"";var n=this.options.selector,i=t.easingName||this.options.easingName,o=t.fillMode||this.options.fillMode,u=t.iterationCount||this.options.iterationCount,f=[];return(0,s.convertCrossBrowserCSSArray)(f,"animation-name",a.PREFIX+"KEYFRAMES_"+(0,s.toId)(r)),(0,s.convertCrossBrowserCSSArray)(f,"animation-duration",e+"s"),(0,s.convertCrossBrowserCSSArray)(f,"animation-timing-function",i),(0,s.convertCrossBrowserCSSArray)(f,"animation-fill-mode",o),(0,s.convertCrossBrowserCSSArray)(f,"animation-iteration-count",u),n+".startAnimation {\n\t\t\t"+f.join("")+"\n\t\t}\n\t\t"+this.toKeyframes()}},{key:"exportCSS",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.duration,arguments.length>1&&void 0!==arguments[1]&&arguments[1];var e=(0,s.toId)(this.options.id||this.setId(p()).options.id||"");if(e){var t=document.querySelector("#"+a.PREFIX+e),r=this.toCSS();t?t.innerText=r:document.body.insertAdjacentHTML("beforeend",'<style id="'+a.PREFIX+"STYLE_"+e+'">'+r+"</style>")}}}]),t}();(0,u.defineGetter)({target:h.prototype,name:"element",parent:"options"}),t.default=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.convertCrossBrowserCSSObject=function(e,t,r){return r?(e[t]=r,e["-moz-"+t]=r,e["-ms-"+t]=r,e["-o-"+t]=r,e["-webkit-"+t]=r,e):e},t.convertCrossBrowserCSSArray=function(e,t,r){return r?(e.push(t+": "+r+";","-moz-"+t+": "+r+";","-ms-"+t+": "+r+";","-o-"+t+": "+r+";","-webkit-"+t+": "+r+";"),e):e},t.toId=function(e){return e.match(/[0-9a-zA-Z]+/g).join("")}},function(e,t,r){"use strict";var n=u(r(11)),i=u(r(8)),o=r(1),a=u(r(3));function u(e){return e&&e.__esModule?e:{default:e}}n.default.EASE=o.EASE,n.default.EASE_IN=o.EASE_IN,n.default.EASE_OUT=o.EASE_OUT,n.default.EASE_IN_OUT=o.EASE_IN_OUT,n.default.cubicBezier=a.default,n.default.SceneItem=i.default,e.exports=n.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=s(r(12)),o=s(r(8)),a=r(0),u=r(1);function s(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),n(t,[{key:"newItem",value:function(e){if((0,a.has)(this.items,e))return this.items[e];var t=new o.default;return this.setItem(e,t),t}},{key:"setSelector",value:function(e,t){var r=void 0,n=void 0,i=t;if("string"==typeof e)return(r=this.getItem(i))?(r.setSelector(e),this):this;for(n in e)i=e[n],(r=this.getItem(i))&&r.setSelector(n);return this}},{key:"load",value:function(e,r){if(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,e,r),!this.options.selector)return this;var n=void 0,i=void 0;for(n in e)"options"!==n&&(i=this.getItem(n))&&i.setSelector(n);return this}},{key:"exportCSS",value:function(){var e=this.items;for(var t in e){e[t].exportCSS(this.duration)}return this}},{key:"playCSS",value:function(){this.exportCSS();var e=this.items;for(var t in e){var r=e[t].options.element;if(r)for(var n=r.length,i=0;i<n;++i)r[i].className+=" startAnimation"}return this}}]),t}();u.SCENE_ROLES.transform=!0,u.SCENE_ROLES.filter=!0,t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=u(r(4)),o=u(r(5)),a=r(0);function u(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.items={},n.load(e,r),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),n(t,null,[{key:"addRole",value:function(e){o.default.addRole(e)}}]),n(t,[{key:"getItem",value:function(e){return this.items[e]}},{key:"newItem",value:function(e){if((0,a.has)(this.items,e))return this.items[e];var t=new o.default;return this.setItem(e,t),t}},{key:"setItem",value:function(e,t){return t.setId(e),this.items[e]=t,this}},{key:"setIterationTime",value:function(e){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setIterationTime",this).call(this,e);var r=this.currentIterationTime,n=this.items,i=void 0,o=void 0;for(o in n)(i=n[o]).currentTime=r*i.playSpeed;return this}},{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.options,r=void 0,n=void 0;for(n in e)"options"!==n&&((r=this.newItem(n)).load(e[n]),t&&r.setOptions(t));return this}},{key:"duration",get:function(){var e=this.items,t=0;for(var r in e){var n=e[r];t=Math.max(t,n.totalDuration/n.playSpeed)}return t},set:function(e){var t=this.items,r=e/this.activeDuration;for(var n in t){var i=t[n],o=i.totalDuration/i.playSpeed*r-i.delay/i.playSpeed;i.duration=o}}}]),t}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0);var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._events={}}return n(e,[{key:"on",value:function(e,t){var r=this._events,n=void 0,o=void 0;if((0,i.isObject)(e)){for(n in e)this.on(n,e[n]);return this}if((0,i.has)(r,e)||(r[e]=[]),(0,i.isObject)(t)){for(o in t)this.on(e,t[o]);return this}return r[e].push(t),this}},{key:"trigger",value:function(e){for(var t=this,r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];var a=this._events;return(0,i.has)(a,e)?(a[e].forEach(function(e){e.apply(t,n)}),this):this}}]),e}();o.defaultEvents={},t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.COLOR_MODELS=["rgb","rgba","hsl","hsla"];var n=t.cutHex=function(e){return"#"===e.charAt(0)?e.substring(1,9):e};t.hexToRGB=function(e){var t=n(e),r=parseInt(t.substring(0,2),16),i=parseInt(t.substring(2,4),16),o=parseInt(t.substring(4,6),16),a=parseInt(t.substring(6,8),16)/255;return isNaN(a)&&(a=1),[r,i,o,a]},t.hex3to6=function(e){var t=e.charAt(1),r=e.charAt(2),n=e.charAt(3);return["#",t,t,r,r,n,n].join("")},t.hslToRGB=function(e){var t=e[0],r=e[1],n=e[2];t<0&&(t+=360*parseInt((Math.abs(t)+360)/360,10)),t%=360;var i=(1-Math.abs(2*n-1))*r,o=i*(1-Math.abs(t/60%2-1)),a=n-i/2,u=void 0;t<60?u=[i,o,0]:t<120?u=[o,i,0]:t<180?u=[0,i,o]:t<240?u=[0,o,i]:t<300?u=[o,0,i]:t<360&&(u=[i,0,o]);var s=[Math.round(255*(u[0]+a)),Math.round(255*(u[1]+a)),Math.round(255*(u[2]+a))];return e.length>3&&(s[3]=e[3]),s}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(16),a=(n=o)&&n.__esModule?n:{default:n};var u=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.names={},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"update",value:function(){var e=this.items;for(var t in e)this.updateFrame(e[t]);return this}},{key:"updateFrame",value:function(e){if(!e)return this;var t=e.properties,r=this.names;for(var n in t){r[n]=r[n]||{};var i=t[n];for(var o in i)r[n][o]=!0}return this}}]),t}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0);var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.times=[],this.items={}}return n(e,[{key:"add",value:function(e,t){return this.items[e]=t,this.addTime(e),this}},{key:"addTime",value:function(e){var t=this.times,r=t.length,n=r,i=void 0;for(i=0;i<r;++i){if(e===t[i])return this;if(e<t[i]){n=i;break}}return this.times.splice(n,0,e),this}},{key:"has",value:function(e){return(0,i.has)(this.items,e)}},{key:"get",value:function(e){return this.items[e]}},{key:"remove",value:function(e){return delete this.items[e],this.removeTime(e),this}},{key:"removeTime",value:function(e){var t=this.times.indexOf(e);return-1===t?this:(this.times.splice(t,1),this)}},{key:"last",get:function(){var e=this.times;return 0===e.length?0:e[e.length-1]}},{key:"length",get:function(){return this.times.length}}]),e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dot=t.dotObject=t.dotColor=t.dotArray=void 0;var n,i=r(0),o=r(2),a=(n=o)&&n.__esModule?n:{default:n},u=r(7);var s=void 0,f=t.dotArray=function(e,t,r,n){var i=[],o=void 0,a=void 0;for(a in e)o=e[a],i[a]=a in t?s(o,t[a],r,n):o;return i},l=t.dotColor=function(e,t,r,n){var i=e,o=t;i instanceof a.default||(i=(0,u.toColorObject)(i)),o instanceof a.default||(o=(0,u.toColorObject)(o));var l=i.value,c=o.value,p=i.model;if(p!==o.model)return s(i.toValue(),o.toValue(),r,n);3===l.length&&(l[3]=1),3===c.length&&(c[3]=1);for(var h=f(l,c,r,n),v=p,d=0;d<3;++d)h[d]=parseInt(h[d],10);return new a.default(h,{type:"color",model:v,prefix:v+"(",suffix:")"})},c=t.dotObject=function(e,t,r,n){if("color"===e.type)return l(e,t,r,n);var o=e.value,u=t.value;if(!(0,i.isObject)(t))return e;var s=f(o,u,r,n),c=new a.default(s,e.separator);return c.prefix=e.prefix,c.suffix=e.suffix,c};t.dot=s=function(e,t,r,n){if(e instanceof a.default)return c(e,t,r,n);if(r+n===0)return e;var o=(0,i.splitUnit)(e),u=(0,i.splitUnit)(t),s=r/(r+n),f=1-s,l=void 0;if(isNaN(o.value)||isNaN(u.value))return s>=1?t:e;l=o.value*f+u.value*s;var p=o.unit||u.unit||!1;return!1===p?l:l+p.trim()},t.dot=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=a(r(6)),o=(a(r(2)),r(9));function a(e){return e&&e.__esModule?e:{default:e}}function u(e){if(!e)return"";var t=[];for(var r in e)t.push(r+"("+e[r]+")");return t.join(" ")}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),n(t,[{key:"toCSS",value:function(){var e=this.toObject(),t={},r=e.property;for(var n in r)t[n]=r[n];var i=u(e.transform),a=u(e.filter);i&&(0,o.convertCrossBrowserCSSObject)(t,"transform",i),a&&(0,o.convertCrossBrowserCSSObject)(t,"filter",a);var s=[];for(var f in t)s.push(f+":"+t[f]+";");return s.join("")}},{key:"cssText",get:function(){return this.toCSS()}}]),t}();t.default=s}])});